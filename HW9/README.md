# HW9 - Пишем скрипт

Пишем [скрипт](./script.sh) для крона, который раз в час присылает на заданную почту:

- X IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- Y запрашиваемых адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- все ошибки c момента последнего запуска
- список всех кодов возврата с указанием их кол-ва с момента последнего запуска

- В письме прописан обрабатываемый временной диапазон
- Реализована защита от мультизапуска
- Скрипт анализирует все файлы *.log с указанного каталога сравнивая timestamp в записях с момента прошлого запуска скрипта

Пример отправляемого email:

```bash
Временной диапазон анализа скрипта: 10-08-2019 00:00:00 - 13-12-2021 02:26:24

Список IP адресов с наибольшим кол-вом запросов (топ 10)
45  93.158.167.130
39  109.236.252.130
37  212.57.117.19
33  188.43.241.106
31  87.250.233.68
24  62.75.198.172
22  148.251.223.21
20  185.6.8.9
17  217.118.66.161
16  95.165.18.146

Список запрашиваемых адресов с наибольшим кол-вом запросов (топ 10)
156  /
120  /wp-login.php
57   /xmlrpc.php
23   /robots.txt
12   /favicon.ico
9    /wp-includes/js/wp-embed.min.js?ver=5.0.4
7    /wp-admin/admin-post.php?page=301bulkoptions
7    /1
6    /wp-content/uploads/2016/10/robo5.jpg
6    /wp-content/uploads/2016/10/robo4.jpg

Список ошибок
5
3  HEAD
2  \x01A\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
1  quit
1  \x16\x03\x01\x00Z\x01\x00\x00V\x03\x01]S\xCD{\xA0\xFF\x0F\x93B\x04\x97\x8B|2i\x17\xE44Z\xAD\xE9\x2243B\x85E6b\xB1{\xB6\x00\x00\x18\x00/\x005\x00\x05\x00
1  \x16\x03\x01\x00Z\x01\x00\x00V\x03\x01]S\xCD{\x8D\xA5\xE6\xAD\xDE&\x18\xC9\xDA\xB1\xCA\xE1\xE2\x05\x83\x00\xDE/\xB3G\x18j\x85\xC7\xBD\xDEvp\x00\x00\x18\x00/\x005\x00\x05\x00
1  PROPFIND
1  9\xCD\xC3V\x8C&\x12Dz/\xB7\xC0t\x96C\xE2

Список кодов возврата
498  200
95   301
51   404
18   400
3    500
2    499
1    405
1    403
1    304
```
